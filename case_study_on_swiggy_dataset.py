# -*- coding: utf-8 -*-
"""Case Study on Swiggy Dataset

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1RMdviPlKl3nevaKY7ebMjckevIGkdXil

# CaseStudy on Swiggy Dataset
By Aarti Agrahari

# 1. Install & import required Python libraries

Importing the Libraries that we will use in the project to clean, process and visualize the information
"""

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import plotly.express as px

"""# 2. Read the CSV file using pd.read_csv() into a Pandas DataFrame:


"""

swiggy_df = pd.read_csv('/content/drive/MyDrive/Colab Notebooks/swiggy.csv')

swiggy_df

"""# 3. Data Preparation & Cleaning The Dataset

### For cleaning the data, we need to select the columns that we need to perform the analysis. After selecting columns, we can analyze our dataset. Let’s check a sample dataset after selecting columns:
"""

swiggy_df.head(10)

"""### We can use.info() method to display a concise summary of a DataFrame, providing information about the column names, data types, and the number of non-null values in each column. It is useful for quickly assessing the structure and integrity of the data."""

swiggy_df.info()

"""### We can create a copy of a data frame, so that our real data is safe. we can use .copy() method to create copy."""

swiggy1_df = swiggy_df.copy()

"""# Finding Null Values in the dataset"""

null_values = swiggy1_df.isna().sum()
null_values

"""### We need to clean them up.

"""

import plotly.graph_objs as go

#plotting the null Values amongst all columns
null_values = swiggy1_df.isna().sum()
fig = go.Figure(data=[go.Bar(x=null_values.index, y=null_values.values)])
fig.update_layout(title='Null Values Count of Columns in Swiggy1 DataFrame', xaxis_title='Columns', yaxis_title='Count of Null Values')
fig.show()

"""cost Column has maximum number of null values.

# Replace the missing values And Delete the Null Rows
"""

#Lets delete those rows which has null value
swiggy1_df.dropna(subset=['rating'], inplace=True)
swiggy1_df.dropna(subset=['cost'], inplace=True)
swiggy1_df.dropna(subset=['cuisine'], inplace=True)

#Lets apply the methods to replace the values
swiggy1_df['rating'] = swiggy1_df['rating'].str.replace('--', '0')
swiggy1_df['cost'] = swiggy1_df['cost'].str.replace('₹', '')
swiggy1_df['rating_count'] = swiggy1_df['rating_count'].str.replace('+','').str.replace('K','000').str.replace('Too Few Ratings', '0').str.replace('ratings', '')

"""# Let’s change the datatype of the following columns:-


1.   Converting ‘rating’ column datatype in ‘float’.
2.   Converting ‘rating_count’ column datatype in ‘int’
3.   Converting ‘cost’ column datatype in ‘int’



"""

swiggy1_df['rating'] = swiggy1_df['rating'].astype(float)
swiggy1_df['rating_count'] = swiggy1_df['rating_count'].astype(int)
swiggy1_df['cost'] = swiggy1_df['cost'].astype(int)
swiggy1_df.info()

swiggy1_df.isna().sum()

"""we have removed all the null values from our dataset and filled them using the corresponding values

#Lets See Some Of The Stastics for Our Dataset Using .describe Method
"""

swiggy1_df.describe()

"""we can delete those rows which has more than 10000 value in cost column."""

swiggy1_df = swiggy1_df.drop(swiggy1_df[swiggy1_df['cost']>10000].index)

"""# 4. Perform analysis & visualization

### • Let’s visualize Cities that have the highest number of rating count given by people
"""

#Lets see the dataset again
swiggy1_df.head(5)

"""#5. Asking And Answering Questions

### **Lets do some analysis on our dataset and try to answer the following questions :-**


*    Which city got the highest number of rating_count which is equal to 12000 ?
*   What are the top 10 cities as per the number of restaurants listed?
*   Which are those Restaurants that has maximum number of branches ?
*   Plotting distributons of cost.
*   What are those cities that has most expensive food in their restaurants ?
*   What are the most Popular Cuisines served throughout the dataset ?
*   What are the top 5 most popular restaurant chains in India in terms of ratings given? Taking only those rating_count that are equal to or greater than 100

# Which city got the highest number of rating_count which is equal to 12000
"""

highest_city_rating_count = swiggy1_df.groupby('city')['rating_count'].sum().sort_values(ascending=False)

plt.figure(figsize=(12,6))
highest_city_rating_count.head(10).plot.bar()
plt.xlabel('Cities')
plt.ylabel('Number Of Ratings')
plt.title('Cities that have highest number of rating count given by people')
plt.show();

"""Banjara Hills Hyderabad got the highest rating_count which is equal to 12000.

# What are the top 10 cities as per the number of restaurants listed?
"""

import matplotlib.pyplot as plt

top_rest_df = swiggy1_df.groupby('city')['name'].count().sort_values(ascending=False)

plt.figure(figsize=(12, 6))
top_rest_df.head(10).plot.bar()
plt.title('Top 10 Cities As Per Number Of Restaurants Listed')
plt.xlabel('Cities')
plt.ylabel('Number of Restaurants')
plt.show()

"""### Bikaner has the maximum number of restaurants listed which is more than 1600. On second place we have Noida-1, it has more than 1400 restaurants.

#  Which are those Restaurants that has maximum number of branches ?
"""

restaurn_chain_df = swiggy1_df[['name']].value_counts().sort_values(ascending=False).head(10)
pd.options.plotting.backend = 'matplotlib'
restaurn_chain_df.plot(kind = 'barh', legend = False,
                 title = 'Restaurants That Has Maximum Number Of Branches',
                 xlabel = 'Restaurants Name',
                 ylabel = 'Number of Branches',
                 figsize = (12,8),
                 fontsize = 12);

"""### #`Domino's Pizza` has more than 400 branches which is maximum among all the restaurants in India.On second position we have `Pizza Hut` and then `KFC`. There is not a big difference between Pizza Hut and KFC in terms of branches.

#• Plotting the distribution of cost
"""

plt.hist(swiggy1_df['cost'], bins=np.arange(0, 2000, 150));
plt.title('Distribution of Cost')
plt.xlabel('Cost')
plt.ylabel('Number Of Listed Restaurant')

"""### From the above graph, we can say 90% of the Restaurant’s Cost lies between 150 and 450.

#  What are those cities that has most expensive food in their restaurants ?
"""

most_exp_df = swiggy1_df.groupby('city')[['cost','rating_count','rating']].mean().sort_values(by='cost', ascending = False).head(10)

city_cost_df = most_exp_df.reset_index()
fig = px.scatter(city_cost_df,
                 x = 'cost',
                 y = 'rating_count',
                 size = 'cost',
                 title = 'Cities That Has Most Expensive Food In Their Restaurants',
                 color = 'rating',
                 hover_data = {'city': True})
fig.update_yaxes(title_text='Number Of Ratings Counts')
fig.update_xaxes(title_text='Cost')
fig.update_layout(width=800, height=600)
fig.show()

"""BBK_ Chattarpur Delhi has most expensive food on average having cost of 800 but it has 0 rating count so no rating is given for this city. On second place, we have Khan Market Delhi which has average cost around 600.

# •  What are the most Popular Cuisines served throughout the dataset ?
"""

a = []
for i in swiggy1_df['cuisine'].values:
    try:
        for j in i.split(','):
            a.append(j)

    except:
        a.append(i)

popular_cuisine_df = pd.DataFrame({"all_cuisine":a}).value_counts()
popular_cuisine_df.head(10)

"""The most poular cuisine is `Chinese` which is serverd in 36451 restaurants of India. On second and third position we have `North Indian` and `Indian` cuisines which are served in 32530 and 25703 restaurants respectively in India.

## What are the top 5 most popular restaurant chains in India in terms of ratings given? Taking only those rating_count that are equal to or greater than 100
"""

#Lets consider only those rastaurants which has a rating_count more than or equal 100 for better result
rating_count_100_df = swiggy1_df[swiggy1_df['rating_count']>=100]
top_5_popular_chains_df = rating_count_100_df.groupby('name')['rating'].mean().sort_values(ascending=False).head(5)
top_5_popular_chains_df

"""The most popular restaurant chain in India in terms of ratings are Tony Bakery and SHRI KRISHNA FOOD ZONE. They both have ratings of 5.0

## **Summary and Conclusion**

1. Based on the dataset, the most popular cuisine served throughout the Restaurants is Chinese. It has served in 36451 restaurants which are the highest in India.
2. The most loved cuisines throughout the dataset are Chinese,  south Indian, and north Indian. These cuisines are widely available all over India. People have given highest number of ratings counts to these cuisines.
3. BBK_ Chattarpur Delhi has most expensive food on average in India, the average cost is 800. On second place, we have Khan Market Delhi which has average cost around 600.
4. Bikaner has the highest number of restaurants listed across India which is more than 1600.
5. Banjara Hills, Hyderabad has the highest number of ratings counts given by people Domino's pizza has a maximum number of branches all over India. It has more than 400 branches in India.
"""

